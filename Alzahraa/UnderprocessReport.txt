import 'package:flutter/material.dart'; // Standard Flutter UI package
import 'package:flutter_localizations/flutter_localizations.dart'; // Package for Arabic RTL support

void main() {
  runApp(const MyApp()); // Starting the app
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false, // Hiding the debug banner
      title: 'Underprocess Reports', // Title of the app

      // Setting up the app to support Arabic and RTL layout
      localizationsDelegates: const [
        GlobalMaterialLocalizations.delegate,
        GlobalWidgetsLocalizations.delegate,
        GlobalCupertinoLocalizations.delegate,
      ],
      supportedLocales: const [
        Locale('ar', 'SA'), // Supporting Arabic (Saudi Arabia)
      ],
      locale: const Locale('ar', 'SA'), // Forcing the app into Arabic mode

      theme: ThemeData(
        fontFamily: 'Roboto',
      ),
      home: Underprocess_Reports(), // Starting with my Underprocess screen
    );
  }
}

class Underprocess_Reports extends StatelessWidget {
  Underprocess_Reports({super.key});

  // If more are added, the counter will update automatically
  final List<Map<String, dynamic>> _underProcessList = [
    {
      'title': 'إضاءة معطلة في القاعة', // Title of the issue
      'location': 'مبنى العلوم - 209', // Building info
      'subLocation': 'الطابق الثاني، الغرفة 204', // Specific room info
      'status': 'قيد المعالجة', // Status text (Orange)
      'category': 'كهرباء', // Category
      'date': '٥ فبراير ٢٠٢٦', // Date
      'icon': Icons.bolt_outlined, // Lightning icon like your image
    },
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor:
          const Color(0xFFE8F0F5), // That light blue background from the image

      // Top Navigation Bar
      appBar: AppBar(
        backgroundColor: Colors.white, // White background for the bar
        elevation: 0, // No shadow
        centerTitle: true, // Title stays in the middle

        // Back arrow (In RTL, this automatically stays on the right side)
        leading: IconButton(
          icon: const Icon(Icons.arrow_back,
              color: Color(0xFF004A8F)), // Dark blue arrow
          onPressed: () => Navigator.of(context).maybePop(), // Go back action
        ),

        // Page Title
        title: const Text(
          'قيد المعالجة', // "Under Process" in Arabic
          style: TextStyle(
            color: Color(0xFF004A8F), // Dark blue text
            fontWeight: FontWeight.bold,
            fontSize: 18,
          ),
        ),
      ),

      body: Column(
        crossAxisAlignment: CrossAxisAlignment
            .start, // Aligns content to the start (Right for Arabic)
        children: [
          // Counter: Shows how many orange reports exist
          Padding(
            padding: const EdgeInsets.symmetric(horizontal: 20, vertical: 15),
            child: Align(
              alignment: Alignment.centerRight, // Keeping it on the right side
              child: Text(
                '${_underProcessList.length} بلاغ', // Automatic counter based on the list size
                style: const TextStyle(
                  color: Colors.grey,
                  fontSize: 14,
                ),
              ),
            ),
          ),

          // Scrollable list of cards
          Expanded(
            child: ListView.builder(
              padding: const EdgeInsets.symmetric(horizontal: 16),
              itemCount:
                  _underProcessList.length, // Telling Flutter how many to build
              itemBuilder: (context, index) {
                final report =
                    _underProcessList[index]; // Getting the data for this card
                return _buildOrangeReportCard(
                  // Calling the card builder function
                  title: report['title'],
                  location: report['location'],
                  subLocation: report['subLocation'],
                  status: report['status'],
                  category: report['category'],
                  date: report['date'],
                  icon: report['icon'],
                );
              },
            ),
          ),
        ],
      ),
    );
  }

  // Helper function to build the Orange UI Card
  Widget _buildOrangeReportCard({
    required String title,
    required String location,
    required String subLocation,
    required String status,
    required String category,
    required String date,
    required IconData icon,
  }) {
    return Container(
      margin: const EdgeInsets.only(bottom: 16), // Space between cards
      padding: const EdgeInsets.all(16), // Space inside the card
      decoration: BoxDecoration(
        color: Colors.white, // White card background
        borderRadius: BorderRadius.circular(12), // Rounded corners
        boxShadow: [
          BoxShadow(
            color: Colors.black.withOpacity(0.03), // Very subtle shadow
            blurRadius: 10,
            offset: const Offset(0, 4),
          ),
        ],
      ),
      child: Column(
        crossAxisAlignment:
            CrossAxisAlignment.start, // Aligning internal text to the right
        children: [
          // TOP ROW: Icon, Title, and Orange Status Badge
          Row(
            children: [
              Icon(icon,
                  color: const Color(0xFF004A8F),
                  size: 28), // The lightning bolt icon
              const SizedBox(width: 12), // Space

              Expanded(
                child: Text(
                  title,
                  style: const TextStyle(
                    fontWeight: FontWeight.bold,
                    fontSize: 16,
                    color: Color(0xFF333333),
                  ),
                ),
              ),

              // THE ORANGE BADGE (Specifically for Underprocess)
              Container(
                padding:
                    const EdgeInsets.symmetric(horizontal: 10, vertical: 4),
                decoration: BoxDecoration(
                  color: const Color(0xFFFFA000), // Orange color as requested
                  borderRadius: BorderRadius.circular(6),
                ),
                child: Text(
                  status, // "قيد المعالجة"
                  style: const TextStyle(
                    color: Colors.white,
                    fontSize: 12,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),
            ],
          ),

          const SizedBox(height: 12),

          // DETAILS: Location (Pin icon)
          Row(
            children: [
              const Icon(Icons.location_on_outlined,
                  size: 16, color: Colors.grey),
              const SizedBox(width: 4),
              Text(
                location,
                style: const TextStyle(color: Colors.grey, fontSize: 13),
              ),
            ],
          ),

          const SizedBox(height: 4),

          // DETAILS: Building/Room (Apartment icon)
          Row(
            children: [
              const Icon(Icons.apartment_outlined,
                  size: 16, color: Colors.grey),
              const SizedBox(width: 4),
              Text(
                subLocation,
                style: const TextStyle(color: Colors.grey, fontSize: 13),
              ),
            ],
          ),

          const Divider(height: 30, thickness: 0.8), // Thin grey line separator

          // BOTTOM ROW: Category (Blue text) and Date (Grey text)
          Row(
            mainAxisAlignment: MainAxisAlignment
                .spaceBetween, // Pushing items to opposite ends
            children: [
              Text(
                category, // "كهرباء"
                style: const TextStyle(
                  color: Color(0xFF007AFF), // Blue color for categories
                  fontWeight: FontWeight.bold,
                  fontSize: 14,
                ),
              ),
              Text(
                date, // The date string
                style: const TextStyle(color: Colors.grey, fontSize: 12),
              ),
            ],
          ),
        ],
      ),
    );
  }
}
